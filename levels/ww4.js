window.Ww4 = function(){
 
 var level = {};
 
 var psd = new b2ParticleSystemDef();
 psd.radius = 0.05;
 psd.dampingStrength = 0.5;
 var w = world.CreateParticleSystem(psd);
 level.water = w;
 
 level.waterMax = 5;
 level.friction = 0;
 
 level.loadtime = 7000;
 level.time = Date.now() + level.loadtime;
 level.finish = 31;
 
 level.polygons = [
  [ //země
   [- 1.0,+0.0],
   [+ 0.0,-2.0],
   [+ 1.0,-3.0],
   [+ 2.0,-3.5],
   [+ 3.0,-3.7],
   [+ 4.0,-3.8],
   [+ 5.0,-3.8],
   [+ 6.0,-3.6],
   [+ 7.0,-3.5],
   [+ 8.0,-3.2],
   [+ 9.0,-2.5],
   [+ 9.2,-3.5],
   [+10.0,-4.8],
   [+11.0,-5.5],
   [+12.0,-5.2],
   [+15.0,-4.2],
   [+18.0,-4.6],
   [+19.0,-5.0],
   [+20.0,-6.0],
   [+21.0,-7.5],
   [+21.5,-7.8],
   [+22.0,-7.9],
   [+23.5,-8.0],
   [+25.0,-7.5],
   [+27.0,-6.8],
   [+28.0,-7.0],
   [+28.5,-7.5],
   [+29.0,-8.7],
   [+29.1,-9.5],
   [+28.9,-9.9],
   [+28.1,-10.7],
   [+27.0,-11.7],
   [+26.2,-12.3],
   [+25.0,-13.0],
   [+24.0,-13.2],
   [+23.0,-13.5],
   [+22.0,-14.1],
   [+21.0,-15.3],
   [+20.5,-16.5],
   [+21.0,-17.8],
   [+22.0,-18.5],
   [+23.0,-19.0],
   [+24.0,-19.3],
   [+25.0,-19.4],
   [+28.0,-19.2],
   [+30.0,-18.7],
   [+32.5,-17.5]
  ],
  [ //strop
   [+20.0,+10  ],
   [+21.2,+0.0 ],
   [+20.4,-2.5 ],
   [+20.5,-3.6 ],
   [+21.0,-4.7 ],
   [+21.1,-4.8 ],
   [+21.4,-4.9 ],
   [+22.2,-5.0 ],
   [+23.7,-5.1 ],
   [+24.0,-5.3 ],
   [+24.2,-5.4 ],
   [+25.0,-5.35],
   [+26.3,-5.5 ],
   [+28.1,-5.6 ],
   [+28.5,-6.1 ],
   [+29.5,-7.0 ],
   [+30.0,-8.5 ],
   [+30.1,-9.4 ],
   [+30.0,-10.0],
   [+29.8,-11.0],
   [+29.2,-11.7],
   [+28.0,-12.5],
   [+27.0,-13.0],
   [+26.9,-13.2],
   [+29.0,-13.4],
   [+30.0,-13.6],
   [+31.0,-13.9],
   [+33.5,-15.0],
   [+34.5,-15.5],
   [+34.7,-16.5],
   [+34.0,-17.0],
   [+33.5,-17.5],
   [+32.5,-17.5]
  ],
  [ //občerstvení - základ
   [32.5,-17.5],
   [32.5,-17.1],
   [33.5,-17.1],
   [33.5,-17.5]
  ],
  [ //občerstvení - střecha
   [32.5,-16.50],
   [33.5,-16.55],
   [33.5,-16.65],
   [32.5,-16.60],
   [32.5,-16.50]
  ],
  [
   [32.55,-17.1],
   [32.55,-16.6]
  ],
  [
   [33.45,-17.10],
   [33.45,-16.65]
  ],
  [ //obečerstvení - stickman
   [32.82,-17.07],
   [32.74,-17.04],
   [32.74,-16.96],
   [32.82,-16.93],
   [32.87,-17.00],
   [32.82,-17.07],
   [32.82,-17.10]
  ]
 ];
 
 level.stream = [
  Stream( w, Circle(- 0.5, +1.0, .3 ), Vector( .1,-.1), 1.50, 10, 1),
  Stream( w, Circle(+13.0, -4.5, .2 ), Vector( .4, .1), 0.15, 20)
 ];
 
 level.slack = [
  SlackWater( w, Rect(  4,  -2.0, 5, 2.0 ) ),
  SlackWater( w, Rect( 12,  -4.0, 3, 1.0 ) ),
  SlackWater( w, Rect( 24,  -6.0, 4, 1.5 ) ),
  SlackWater( w, Rect( 25, -17.5, 5, 2.0 ) )
 ];
 
 level.ready = false;
 
 level.load = function(){
  level.time = Date.now();
  level.ready = true;
  kayak.SetTransform(new b2Vec2(6,0),0);
  kayak.SetLinearVelocity(new b2Vec2(0,0));
  kayak.SetAngularVelocity(0);
 };
 
 level.reload = function(){
  level.ready = false;
  level.load();
 };
 
 return level;
 
};
